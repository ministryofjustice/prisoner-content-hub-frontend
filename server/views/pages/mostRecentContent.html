{% from "../components/feedback-widget/macro.njk" import hubFeedbackWidget %}
{% from "../components/content-tile-small/macro.njk" import contentTileSmall %}

{% extends "../components/template.njk" %}

{% block pageTitle %}
  {{ title }}
{% endblock %}

{% block header %}{% endblock %}
{% block homeNavigation %}{% endblock %}
{% block search %}{% endblock %}

{% block head %}
  <link href="/public/stylesheets/application.css" rel="stylesheet"/>
{% endblock %}

{% block main %}
  <div class="govuk-hub-landing-page-header govuk-hub-landing-page-header--with-stripe">
    <div class="govuk-width-container">
      <div class="govuk-main-wrapper">
        <div class="govuk-grid-row">
          <div class="govuk-grid-column-one-half govuk-!-padding-top-2">
            <h1 id="title" class="govuk-heading-xl">{{ title }}</h1>
            {% if data.summary %}
              <div id="description" class="govuk-body-l">
                {{data.summary | safe }}
              </div>
            {% endif %}
          </div>
        </div>
      </div>
    </div>
  </div>

{% endblock %}

{% block content %}

  <div class="home-content__four-items">
    {% for tile in data %}
      {{ contentTileSmall(tile) }}
    {% endfor %}
  </div>


  {% if not data.excludeFeedback %}
    <div class="govuk-form-group govuk-hub-article-feedback govuk-hub-on-black-feedback">
      {% set tagHeading %}
        Tell us what you think about this page:
      {% endset %}
      {{ hubFeedbackWidget({
        contentId: data.id,
        heading: tagHeading,
        title: title,
        name: title,
        contentType: data.contentType,
        series: title,
        feedbackId: feedbackId,
        series: title if data.contentType == 'series',
        topics: title if data.contentType == 'topic'
      })}}
    </div>
  {% endif %}
{% endblock %}
{% block bodyEnd %}
<script src="/public/generated/templates.js"></script>
<script src="/public/nunjucks-slim.js"></script>
<script src="/public/javascript/showMore.js"></script>
<script>setUpShowMore($('.show-more-tiles'), $('.small-tiles'))</script>
{% endblock %}
