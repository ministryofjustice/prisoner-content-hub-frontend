{% extends "../components/template.njk" %}

{% block pageTitle %}
  The error has been logged, please try again
{% endblock %}

{% block head %}
  <link href="/public/stylesheets/application.css" rel="stylesheet"/>
  <script>
    var validHost = new URL(document.referrer).hostname.endsWith('service.justice.gov.uk');
    var referrer = validHost ? document.referrer : '/';
  </script>
{% endblock %}

{% block main %}
  <div class="govuk-width-container">
    <main class="govuk-main-wrapper--l" id="main-content" role="main">
      <div class="govuk-grid-row">
        <div class="govuk-grid-column-full">
          <h1 class="govuk-heading-xl">Something went wrong</h1>
          <p class="govuk-body">
            Return to the <a href="/">home page</a> or
            <script>
              document.write('<a href="' + referrer + '">try again</a>');
            </script>
          </p>
          {% if error %}
            <h2 class="govuk-heading-m">Geek Stuff ðŸ‘‡</h2>
            <div class="govuk-inset-text">
              <p class="govuk-body govuk-!-font-weight-bold">
                {{ error.message }}
              </p>
              <code>{{ error.stack }}</code>
            </div>
          {% endif %}
        </div>
      </div>
    </main>
  </div>
{% endblock %}
