{% from "govuk/components/button/macro.njk" import govukButton %}
{% from "govuk/components/warning-text/macro.njk" import govukWarningText %}
{% from "govuk/components/select/macro.njk" import govukSelect %}
{% from "govuk/components/tabs/macro.njk" import govukTabs %}
{% from "govuk/components/table/macro.njk" import govukTable %}
{% from "../components/page-navigation/macro.njk" import pageNavigation %}
{% from "../components/transaction/macro.njk" import transaction %}
{% from "../components/user-details/macro.njk" import userDetails %}
{% from "../components/feedback-widget/macro.njk" import hubFeedbackWidget %}

{% extends "../components/template.njk" %}

{% block pageTitle %}
  {{ title }}
{% endblock %}

{% block head %}
  <link href="/public/stylesheets/application.css" rel="stylesheet"/>
{% endblock %}

{% block pageNavigation %}
  {{ pageNavigation({ title: title }) }}
{% endblock %}

{% block topBar %}
  {{ topBar({
    establishmentDisplayName: establishmentDisplayName,
    showBar: false,
    userName: config.userName,
    returnUrl: config.returnUrl
  }) }}
{% endblock %}

{% block userDetails %}
  {{ userDetails({
    detailsType: config.detailsType,
    userName: config.userName
  }) }}
{% endblock %}

{% block header %}
  <div class="govuk-width-container govuk-body">
    <h1>{{ title }}</h1>
  </div>
{% endblock %}

{% block homeNavigation %}{% endblock %}
{% block search %}{% endblock %}

{% block main %}
  <div class="govuk-width-container govuk-body">
  {% set spendsHtml %}
  <h2 class="govuk-heading-m govuk-!-margin-bottom-1">Current balance</h2>
  <p>£43.32</P>
  {{ govukTable({
    head: [
          { text: "Payment Date" },
          { text: "Money in" },
          { text: "Money out" },
          { text: "Balance" },
          { text: "Payment description" },
          { text: "Prison" }
        ],
    rows: [
      [
        {
          text: "David Francis"
        },
        {
          text: "3"
        },
        {
          text: "0"
        }
      ],
      [
        {
          text: "Paul Farmer"
        },
        {
          text: "1"
        },
        {
          text: "0"
        }
      ],
      [
        {
          text: "Rita Patel"
        },
        {
          text: "2"
        },
        {
          text: "0"
        }
      ]
    ]
  }) }}
  {% endset -%}

  {% set privateHtml %}
  <h2 class="govuk-heading-m govuk-!-margin-bottom-1">Current balance</h2>
  <p>£43.32</P>
  {{ govukTable({
    head: [
          { text: "Payment Date" },
          { text: "Money in" },
          { text: "Money out" },
          { text: "Balance" },
          { text: "Payment description" },
          { text: "Prison" }
        ],
    rows: [
      [
        {
          text: "David Francis"
        },
        {
          text: "24"
        },
        {
          text: "18"
        }
      ],
      [
        {
          text: "Paul Farmer"
        },
        {
          text: "16"
        },
        {
          text: "20"
        }
      ],
      [
        {
          text: "Rita Patel"
        },
        {
          text: "24"
        },
        {
          text: "27"
        }
      ]
    ]
  }) }}
  {% endset -%}

  {% set savingsHtml %}
  <h2 class="govuk-heading-m govuk-!-margin-bottom-1">Current balance</h2>
  <p>£43.32</P>

  {{ govukTable({
  head: [
          { text: "Payment Date" },
          { text: "Money in" },
          { text: "Money out" },
          { text: "Balance" },
          { text: "Payment description" },
          { text: "Prison" }
        ],
    rows: [
      [
        {
          text: "David Francis"
        },
        {
          text: "98"
        },
        {
          text: "95"
        }
      ],
      [
        {
          text: "Paul Farmer"
        },
        {
          text: "122"
        },
        {
          text: "131"
        }
      ],
      [
        {
          text: "Rita Patel"
        },
        {
          text: "126"
        },
        {
          text: "142"
        }
      ]
    ]
  }) }}
  {% endset -%}


  {{ govukTabs({
    items: [
      {
        label: "Spends",
        id: "spends",
        panel: {
          html: spendsHtml
        }
      },
      {
        label: "Private",
        id: "private",
        panel: {
          html: privateHtml
        }
      },
      {
        label: "Savings",
        id: "savings",
        panel: {
          html: savingsHtml
        }
      }
    ]
  }) }}

  {{ transaction({
          data: data.transactions
        }) }}

  <div class="govuk-hub-article-feedback">
    <p class="govuk-body">Tell us what you think:</p>
    {{ hubFeedbackWidget({
      title: data.title,
      contentId: data.id,
      contentType: data.contentType,
      feedbackId: feedbackId,
      categories: data.categories,
      secondaryTags: data.secondaryTags
    })}}
  </div>
{% endblock %}

{% block bodyEnd %}
  <script src="/public/all.js"></script>
  <script>
    window
      .GOVUKFrontend
      .initAll();
  </script>
{% endblock %}
