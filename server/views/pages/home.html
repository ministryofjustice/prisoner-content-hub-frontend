{% from "govuk/components/button/macro.njk" import govukButton %}
{% from "govuk/components/warning-text/macro.njk" import govukWarningText %}
{% from "../components/personal-schedule-today/macro.njk" import personalScheduleToday %}
{% from "../components/content-tile-large/macro.njk" import contentTileLarge %}
{% from "../components/content-tile-small/macro.njk" import contentTileSmall %}

{% extends "../components/template.njk" %}

{% block pageTitle %}
  {{title}}
{% endblock %}

{% block head %}
  <link href="/public/stylesheets/application.css" rel="stylesheet"/>
{% endblock %}

{% block pageNavigation %}
    {{ govukButton({
      text: "Browse all topics",
      href: "/topics",
      isStartButton: true,
      classes: "govuk-!-margin-2"
    }) }}
{% endblock %}

{% block header %}
  {% if establishmentName != 'berwyn' %}
    <div class="govuk-width-container home-navigation govuk-!-margin-top-3">
      {{personalScheduleToday({ data: currentEvents, authReturnUrl: returnUrl }, userName if isSignedIn else '')}}
    </div>
  {% endif %}
{% endblock %}

{% block search %}{% endblock %}

{% block content %}
  <div class="govuk-body home-content">
    {% if homepage.upperFeatured %}
      {{ contentTileLarge({content: homepage.upperFeatured, imageAlign: 'right'}) }}
    {% endif %}
    <div class="home-content__four-items">
      {% for tile in homepage.smallTiles %}
        {{ contentTileSmall(tile) }}
      {% endfor %}
    </div>
    {% if homepage.lowerFeatured %}
      {{ contentTileLarge({content: homepage.lowerFeatured, imageAlign: 'left'}) }}
    {% endif %}
  </div>
{% endblock %}

{% block bodyEnd %}
  <script src="/public/all.js"></script>
  <script>
    window
      .GOVUKFrontend
      .initAll();
  </script>
{% endblock %}
